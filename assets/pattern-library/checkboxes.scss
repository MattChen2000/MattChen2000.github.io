@import "animations";
@import "colors";
@import "mixins";

.cf-checkbox {
  align-items: center;
  background-color: $white;
  border: 1px solid cf-color($gray, 55);
  color: $black;
  display: flex;
  font-size: 0.813rem;
  min-height: 1.875rem;
  margin: 0 0 0 -1px;
  padding: 0 0.769em;
  position: relative;

  &__container {
    display: inline-flex;
  }
  
  &:first-of-type {
    margin-left: 0;
  }
 
  &:hover {
    background-color: cf-color($gray, 20);
    cursor: pointer;
  }
  
  &__input {
  opacity: 0;

    &:checked+span::before, &:indeterminate+span::before {
      background: #0094d2;
      border: 0;
    }

    +span::after {
      position: absolute;
      content: '';
      display: none;
      height: 0.385em;
      width: 0.615em;
      border-left: 2px solid $white;
      border-bottom: 2px solid $white;
      top: 0.462em;
      left: 0.538em;
      transform: translate(0, 0.308em) rotate(-45deg);
    }

    &:checked+span::after, &:indeterminate+span::after {
      display: inline-block;
    }

    &:indeterminate+span::after {
      border-left: 0;
      border-bottom: 2px solid $white;
      transform: none;
      top: 0.769em;
    }

    &:focus+span::before {
      outline: 1px dotted $gray;
    }
    &:focus:checked+span::before {
      border-color: $white;
    }
  }

  &__label {
    &::before {
      background: $white;
      box-sizing: inherit;
      position: absolute;
      top: 0.615em;
      left: 0.385em;
      content: '';
      display: inline-block;
      height: 0.750rem;
      width: 0.750rem;
      border: 1px solid #9a9a9a;
    }
    &::after {
      box-sizing: inherit;
      position: absolute;
      content: '';
      display: none;
      height: 0.308em;
      width: 0.538em;
      border-left: 2px solid $white;
      border-bottom: 2px solid $white;
      top: 0.462em;
      left: 0.538em;
      transform: translate(0, 0.308em) rotate(-45deg);
    }
    &::first-letter {
      padding-left: 1px;
    }
  }

  &--disabled {
    &:hover {
      background-color: $white;
      cursor: not-allowed;
    }
    .cf-checkbox__label {      
      color: cf-color($gray, 55); 
      &::before, &::after {
        border-color: cf-color($gray, 55);
        cursor: not-allowed;
      }
    }
    .cf-checkbox__input {
      cursor: not-allowed;
      &:checked+span::before {
        background: cf-color($gray, 20);      
        border: 0;
        cursor: not-allowed;
      }
      &:not(:checked):indeterminate+.cf-checkbox__label::before {
        background: cf-color($gray, 20);
      }
      &:indeterminate+.cf-checkbox__label::after {
        border-color: cf-color($gray, 55);
      }
    }
  }
  &--no-outline:not(.cf-checkbox--no-label).cf-checkbox {
    border: none;
    background-color: transparent;
    line-height: 1.875rem;
    padding-left: 0.385em;
    .cf-checkbox__label {
      margin-left: 0.385em;
    }
    &--disabled {
      .cf-checkbox__input {
        &:not(:checked):not(:indeterminate)+span::before {
          background: transparent;
        }
      }
    }
    &:hover {
      background-color: none;
    }
  }
  &--no-label {
    border: none;
    background-color: transparent;
    margin: 0;
    padding: 0;
    height: auto;
    width: 0.750rem;
    min-height: auto;
    position: relative;

    &:hover {
        background-color: none;
    }

    .cf-checkbox__label {
        &::before {
            position: absolute;
            top: -1px;
            left: 0;
        }

        &::after {
            position: absolute;
            top: -0.150em;
            left: 0.150em;
        }
    }
  }
  &--invalid {
    border: 2px solid $red;
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QjhCQUNFNzM5RDhEMTFFOEFBNUNBNjVENDQ1QjhBNDkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QjhCQUNFNzQ5RDhEMTFFOEFBNUNBNjVENDQ1QjhBNDkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCOEJBQ0U3MTlEOEQxMUU4QUE1Q0E2NUQ0NDVCOEE0OSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCOEJBQ0U3MjlEOEQxMUU4QUE1Q0E2NUQ0NDVCOEE0OSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsY7uYEAAAGlSURBVHjalJRPS4JBEMZfX6IIQpCgPwpCJBUSFhLoKbKjBX6G/ACdjU4dAs/ds0OfQPpzTPCUUB0kJMUuQWpBBCGEXepZed6Yll2rgR+vO7PPLO7OjO9wZs2xWBSsgxgYBh+gCi5AzSQYMvjGwC7YApOG+BM4AvugKwOutjEB7kDOksihP8d9CVuyOLgEIedvFuL+uJ5sBJTExnPwYEnyyPgn1yXqv5PtAT9/n4ANsEyhnmiJ8SJ9fur7ySJgWwjmwDh4BSugRX+L6xfGo0Kj9BGVLANGRWCeJTANOmAVnPHbob/KQz1T+oyrneBZEFyxxu7BJr8x+oOmunRZV44lYUHzFSyJ+vXp6oUnTN1RVvNlxR3q1nUtreFdtrqbWXDKb1V7FGk1l0/8Lpx13k0bTIEyS6HMdZvxutAofVEla4IDEWjw+QPaZXuPEmC8ITRK3/RxaqgKfhaFqyp8EYQNf0d1xi1Ic/0GJkDPmxo9kALXXKcH9GRYOyRF/Y9GvwFJQws5A3o0SZ1xBFXAAshzbjmWeZbnvspvw1HV3Q44/u+k/RJgAGnmYNTfeOqlAAAAAElFTkSuQmCC');
    background-repeat: no-repeat;
    background-position: right 0.313rem center;
    background-size: 1.000rem;
    padding-right: 1.500rem;
  }
}

.cf-task-checkbox {
  &:focus-within, &--focused {
    .cf-task-checkbox__frame {
      outline: 1px dotted $gray;
    }
  }
  &--checked {
    .cf-task-checkbox__frame {
      background: $green;
      border-color: $green;
      animation: wave .4s ease;
    }
    .cf-task-checkbox__checkmark {
      stroke-dashoffset: 0;
    }
  }
  &--disabled {
    .cf-task-checkbox__label {
      color: cf-color($gray, 55);
      cursor: not-allowed;
    }
    .cf-task-checkbox__frame {
      border-color: cf-color($gray, 20);
    }
    &.cf-task-checkbox--checked .cf-task-checkbox__frame {
      background-color: cf-color($gray, 20);
      border-color: transparent;
    }
    .cf-task-checkbox__checkmark {
      stroke: cf-color($gray, 55);
    }
    &:not(.cf-task-checkbox--checked) .cf-task-checkbox__checkmark {
      display: none;
    }
  }
  &__input {
    -webkit-user-select: none;
    user-select: none;
    cursor: pointer;
  }
  &__label {
    cursor: pointer;
  }
  &__frame {
    display: inline-block;
    vertical-align: middle;
    transform: translate3d(0,0,0);
    position: relative;
    width: 1.250rem;
    height: 1.250rem;
    border-radius: 50%;
    transform: scale(1);
    vertical-align: middle;
    border: 2px solid cf-color($gray, 55);
    transition: all .2s ease;
  }
  &__checkmark {
    position: absolute;
    top: 0.188rem;
    left: 0.125rem;
    fill: none;
    stroke: #FFFFFF;
    stroke-width: 2;
    stroke-linecap: round;
    stroke-linejoin: round;
    stroke-dasharray: 1.000rem;
    stroke-dashoffset: 1.000rem;
    transition: all .3s ease;
    transition-delay: .1s;
    transform: translate3d(0,0,0);
    &::before {
      content: "";
      width: 100%;
      height: 100%;
      background: transparent;
      display: block;
      transform: scale(0);
      opacity: 1;
      border-radius: 50%;
    }
  }
  &__title {
    padding-left: 0.313rem;
  }
}
