@import "colors";
@import "mixins";

$input-width-sm: 6.875rem;
$input-width-lg: 15.625rem;
$input-width-xl: 22.500rem;
$input-width-elastic: 100%;

%focus-state {
    outline: 0;
    box-shadow: 0 0 0 0.2rem $focus-input;
    border-color: $focus-border;
}

%invalid {
    background-image: url("data:image/svg+xml,%3Csvg id='error' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%239d2140'%3E%3Ctitle%3Eerror%3C/title%3E%3Cpath d='M23,15a8,8,0,1,1-8-8A8,8,0,0,1,23,15Zm-5.34,4.07a1,1,0,0,0,1.41,0h0a1,1,0,0,0,0-1.41L16.42,15l2.66-2.66a1,1,0,0,0,0-1.41h0a1,1,0,0,0-1.41,0L15,13.59l-2.66-2.66a1,1,0,0,0-1.41,0h0a1,1,0,0,0,0,1.41L13.59,15l-2.66,2.66a1,1,0,0,0,0,1.41h0a1,1,0,0,0,1.41,0L15,16.42Z' transform='translate(-7 -7)'/%3E%3C/svg%3E%0A");
    background-repeat: no-repeat;
    background-position: center center;
    background-size: 1.000rem 1.000rem;
}

%warning {
    background-image: url("data:image/svg+xml,%3Csvg id='warning' fill='%23d49d47' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cdefs%3E%3Cstyle%3E .cls-1 %7B fill-rule: evenodd; %7D %3C/style%3E%3C/defs%3E%3Ctitle%3Ewarning%3C/title%3E%3Cpath class='cls-1' d='M7,15a8,8,0,1,1,8,8A8,8,0,0,1,7,15Zm8,1.5a0.71,0.71,0,0,0,.71-0.7l0.46-4.55a1.37,1.37,0,0,0-.35-0.89,1.23,1.23,0,0,0-1.64,0,1.35,1.35,0,0,0-.34.91l0.46,4.5A0.72,0.72,0,0,0,15,16.5ZM15,18a1,1,0,1,0,1,1A1,1,0,0,0,15,18Z' transform='translate(-7 -7)'/%3E%3C/svg%3E%0A");
    background-repeat: no-repeat;
    background-position: center center;
    background-size: 1.000rem 1.000rem;
}

html {
    input.cf-input-text[disabled], textarea.cf-textarea[disabled] {
        cursor: not-allowed;
        color: cf-color($gray, 55);
    }
}

.cf-input-text {
    border: 1px solid cf-color($gray, 55);
    height: 1.875rem;
    font-size: 0.813rem;
    padding: 0 0.615em;
    min-width: 10.938rem;

    &:hover:not(.cf-input-invalid):not(.cf-input-text--disabled):not(.cf-input-warning)  {
        border-color: $gray;
    }

    &:focus {
        @extend %focus-state;
    }

    &::-ms-clear {
        display: none;
    }

    &--small {
        max-width: $input-width-sm;
        min-width: $input-width-sm;
    }

    &--large {
        min-width: $input-width-lg;
    }

    &--x-large {
        min-width: $input-width-xl;
    }

    &--elastic {
        min-width: $input-width-elastic;
        width: $input-width-elastic;
    }

    &::-webkit-input-placeholder {
        color: cf-color($gray, 55);
        font-family: Arial, Helvetica, sans-serif;
    }

    &:-moz-placeholder {
        color: cf-color($gray, 55);
        font-family: Arial, Helvetica, sans-serif;
    }

    &::-moz-placeholder {
        color: cf-color($gray, 55);
        font-family: Arial, Helvetica, sans-serif;
    }

    &:-ms-input-placeholder {
        color: cf-color($gray, 55);
        font-family: Arial, Helvetica, sans-serif;
    }
}

.cf-input-with-icon {
    display: inline-flex;
    flex-flow: row nowrap;
    align-items: center;
    position: relative;
    border: 1px solid cf-color($gray, 55);
    width: 10.938rem;
    height: 1.875rem;
    margin: 0;
    background-color: $white;

    &:focus-within, &--focused {
        @extend %focus-state;
    }

    &--invalid {
        border: 0.125rem solid $red;
        padding-right: 0;

        .cf-input-with-icon__i {
            order: 2;
        }

        span.cf-input-with-icon__text {
            padding-left: 0.125rem;
            order: 2;
        }

        &.cf-input-with-icon--left {
            &::before {
                margin-right: 0.375rem;
            }
            .cf-input-with-icon__i {
                order: 0;
            }
        }
        &.cf-input-with-icon--elastic:not(.cf-input-with-icon--left) {
            i.cf-icon-error {
                width: 1.625rem;
                flex-basis: 1.625rem;
            }
        }
    }

    &--small {
        max-width: $input-width-sm;
        min-width: $input-width-sm;
    }

    &--large {
        min-width: $input-width-lg;
    }

    &--x-large {
        min-width: $input-width-xl;
    }

    &--elastic {
        min-width: $input-width-elastic;
        width: $input-width-elastic;
    }

    &__input {
        font-size: 0.813rem;
        height: 1.625rem;
        border: 0;
        padding: 0 0 0 0.615em;
        width: 1%;
        flex: 1 1 auto;
        min-width: auto;

        &:focus {
            outline: 0;
        }

        &:hover:not(.cf-input-invalid):not(.cf-input-text--disabled) {
            border-color: $gray;
        }

        &.cf-input-invalid {
            margin-right: 0;
        }
    }

    .cf-input-with-icon__i {
        font-size: 1.000rem;
        position: relative;
        margin-right: 0;
        right: 0.313rem;
        flex: 0 1 auto;
        padding: 0 0.250em 0 0.500em;
        color: $gray;
    }

    .cf-input-with-icon__text {
        flex: 0 1 auto;
        padding: 0 0.500em;
        font-weight: 700;
        color: $gray;
        font-size: 0.750rem;
    }

    i.cf-icon-error {
        width: 1.500rem;
        flex: 0 0 1.500rem;
        order: 1;
        &:hover {
            color: $red;
        }
    }

    &--left {
        .cf-input-with-icon__input {
            padding-left: 0;
            margin-right: 1px;
        }
        .cf-input-with-icon__i {
            left: 0;
            right: auto;
            padding-left: 0.188em;
        }
        i.cf-icon-error {
            order: 2;
            width: 1.813rem;
            flex-basis: 1.813rem;
        }
    }

    &--elastic {
        min-width: 100%;
        width: 100%;
        > .cf-input-with-icon__input {
            min-width: auto;
            width: 100%;
        }
    }
}

.cf-textarea {
    border: 1px solid cf-color($gray, 55);
    font-size: 0.813rem;
    padding: 0.615em;
    height: 5.625rem;
    line-height: 1.385em;
    width: 15.625rem;

    &:hover:not(:disabled)  {
        border-color: $gray;
    }

    &:focus {
        @extend %focus-state;
    }

    &--large {
        height: 8.500rem;
        width: 22.500rem;
    }

    &--elastic {
        height: 8.500rem;
        width: 100%;
    }

    @at-root {
        .cf-expanding-note {
            background-color: $white;
            position: relative;
            display: flex;
            flex-flow: column nowrap;
            border: 1px solid cf-color($gray, 55);
            &:hover:not(:disabled)  {
                border-color: $gray;
            }
            &--focusin {
                @extend %focus-state;
                .cf-textarea--expanding-note {
                    min-height: 4.125rem;
                    background: none;
                    border-bottom: 0;
                    box-shadow: none;
                    &:hover:not(:disabled)  {
                        border-color: cf-color($gray, 55);
                    }
                }
            }
            &__footer {
                display: flex;
                flex-flow: row nowrap;
                height: 1.500rem;
            }
        }
    }

    &--expanding-note {
        border: none;
        resize: none;
        margin: 1px;
        width: 99.5%;
        height: 1.875rem;
        padding: 0.462em 0.615em 0.385em;
        background-color: $white;
        background-image: url("data:image/svg+xml,%3C%3Fxml version='1.0' encoding='iso-8859-1'%3F%3E%3C!-- Generator: Adobe Illustrator 18.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0) --%3E%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 16 16' style='enable-background:new 0 0 16 16;' xml:space='preserve'%3E%3Cg id='plus'%3E%3Cpath style='fill:%23717171;' d='M15,7L9,7V1c0-0.552-0.447-1-1-1S7,0.448,7,1v6l-6,0c-0.553,0-1,0.447-1,1c0.001,0.552,0.448,1,1,1 l6,0v6c0,0.553,0.447,1,1,1s1-0.447,1-1V9l6.001,0C15.553,9,16,8.553,16,8C16,7.447,15.553,7,15,7z'/%3E%3C/g%3E%3Cg id='Layer_1'%3E%3C/g%3E%3C/svg%3E%0A");
        background-repeat: no-repeat;
        background-size: 1.000rem 1.000rem;
        background-position: top 7px right 5px;
    }

    &__button {
        margin: 3px 3px 3px auto;
        .cf-textarea--isfocused & {
            display: block;
        }
    }

    &--invalid:not(:disabled) {
        border: 0.125rem solid $red;
        padding-right: 1.500rem;
        @extend %invalid;
        background-position: top 5px right 5px;
        &:hover {
            border: 0.125rem solid $red;
        }
    }

    &--warning:not(:disabled) {
        border: 0.125rem solid cf-color($yellow, 110);
        padding-right: 1.500rem;
        @extend %warning;
        background-position: top 5px right 5px;
        &:hover {
            border: 0.125rem solid cf-color($yellow, 110);
        }
    }

    &::-webkit-input-placeholder {
        color: cf-color($gray, 55);
        font-family: Arial, Helvetica, sans-serif;
        font-style: italic;
    }

    &:-moz-placeholder {
        color: cf-color($gray, 55);
        font-family: Arial, Helvetica, sans-serif;
        font-style: italic;
    }

    &::-moz-placeholder {
        color: cf-color($gray, 55);
        font-family: Arial, Helvetica, sans-serif;
        font-style: italic;
    }

    &:-ms-input-placeholder {
        color: cf-color($gray, 55);
        font-family: Arial, Helvetica, sans-serif;
        font-style: italic;
    }
}

.cf-fields {
    display: flex;
    padding: 0.625rem 0.313rem;
    &--right {
        justify-content: flex-end;
    }
    .cf-field {
        flex: 1 1 auto;
        padding: 0 0.313rem;
        &--full {
            width: 100%;
            flex: none;
        }
        &--1of2 {
            width: 50%;
            flex: none;
        }
        &--1of3 {
            width: 33.3333%;
            flex: none;
        }
        &--1of4 {
            width: 25%;
            flex: none;
        }
        &--1of6 {
            width: 16.6666%;
            flex: none;
        }
    }
    &:last-child {
        padding-bottom: 2.000rem;
    }
}

.cf-input-invalid {
    @extend %invalid;
    background-position: right 0.313rem center;
    border: 2px solid $red;
}

.cf-input-warning {
    @extend %warning;
    background-position: right 0.313rem center;
    border: 2px solid cf-color($yellow, 110);
}